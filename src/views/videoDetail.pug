extends layouts/main
include mixin/videoPlayer

block content
    .video-detail__container
        +videoPlayer({
            src:videos.fileUrl
        })
        .video__info
            if loggedUser && videos.creator.id === loggedUser.id
                a(href=routes.editVideo(videos.id)) 
                    button Edit Video
            h5.video__title=videos.title
            p.video__description=videos.description
            if videos.views === 1 
                span.video__views 1 view
            else
                span.video__views #{videos.views} views
            .video__author
                | 업로드 
                a(href=routes.userDetail(videos.creator.id))=videos.creator.name
        .video__comments
            if videos.comments.length === 1
                span.video__comment-number
                   span#commentNumber 1  
                   span  comment
            else
                span.video__comment-number
                    span#commentNumber=videos.comments.length  
                    span  comments
            form.add-comment#addComment
                input#commentInput(type="text", name="comment", class=commentId, placeholder="댓글 입력")
                button.comment-addbtn#commentAddBtn ✅
            ul.video__comment-list#commentList
                each comment in videos.comments.reverse()
                    li
                        .video__comment-info
                            .video__comment-title
                                span.author=comment.creator.name
                                span.time=comment.createAt.toString().slice(0,21)
                            if loggedUser && comment.creator.id.toString() === loggedUser.id
                                span(class="del-comment" id=comment.id) ❎
                        span=comment.text